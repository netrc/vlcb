extends layout

block pagecontent
  h2 Powered by...
  table.cd
    tr
      td.cd
        a(href="//heroku.com")
          img(src="http://logos.heroku.com/images/heroku-logo-light-88x31.png")
      td.cd
        a(href="//c9.io") Cloud9 IDE
      td.cd
        a(href="//nodejs.org")
          img(src="http://upload.wikimedia.org/wikipedia/en/thumb/a/a7/Nodejs_logo_light.png/150px-Nodejs_logo_light.png")
      td.cd
        a(href="//expressjs.com") Express
    tr
      td.cd
        a(href="//twitter.github.com/bootstrap/") Bootstrap
      td.cd
        a(href="//github.com/marcello3d/node-mongolian") Mongolian
      td.cd
        a(href="//www.mongodb.org/") MongoDB
      td.cd
        a(href="//github.com/netrc")
          img(src="https://raw.github.com/github/media/master/logos/github_logo_social_coding_outlined.png")
    tr
      td.cd
        a(href="//jsfiddle.net")
         img(src="//jsfiddle.net/img/logo.png")
      td.cd
        a(href="//www.jslint.com/") jslint
      td.cd
        a(href="//myhosting.com/virtual-private-server/") myhosting VPS
      td.cd
        a(href="//vim.org") vim
  hr
  h3 Data Check
  div.row
    div.span2
    div.span2  Known Rubbings...
    div#krtext.span1 ...calculating...
    div.span4
      div.progress.progress-info.progress-striped.active
        div#krpct.bar(style="width: 45.666666%;")
  hr
  form(method="get", action="/dumpData")
    input(type="submit", value="Dump data...")
  hr
  form(method="get", action="/dobatch")
    input(type="submit", value="Do Batch")

block pagescript
    script
      $(document).ready(function() {
        // The set of automatic tests....
        // ... rubbings with no brass, e.g. unknown
        $.get("/rest/Rubbing/","",function(d,tstatus,jxhr) {
        var l = d.length;
        var k = 0.0;
          for (var i=0;i<d.length;i++) {
            var r = d[i];
            if (r.brass && (r.brass !== "") && (r.brass !== "unknown")) {
              k = k + 1.0;
            };
            $("#krpct").css("width",(k/l*100)+"%");
          };
        $("#krtext").html("("+k + "/" + l+")");
        } );
      });
